<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Join.Interpretation.Simple.Types</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Join-Interpretation-Simple-Types.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Join.Interpretation.Simple.Types</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:ChanId">ChanId</a> </li><li class="src short"><span class="keyword">type</span> <a href="#t:ReplyId">ReplyId</a> = Maybe <a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a></li><li class="src short"><span class="keyword">data</span>  <a href="#t:MsgData">MsgData</a> </li><li class="src short"><span class="keyword">data</span>  <a href="#t:Msg">Msg</a> </li><li class="src short"><span class="keyword">type</span> <a href="#t:Msgs">Msgs</a> = [<a href="Join-Interpretation-Simple-Types.html#t:Msg">Msg</a>]</li><li class="src short"><span class="keyword">data</span>  <a href="#t:MsgQueue">MsgQueue</a> </li><li class="src short"><a href="#v:newChanId">newChanId</a> :: IO <a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a></li><li class="src short"><a href="#v:mkChanId">mkChanId</a> ::  <a href="Join-Language-Types-Channel.html#t:Channel">Channel</a> t a -&gt; <a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a></li><li class="src short"><a href="#v:getChanId">getChanId</a> :: <a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a> -&gt; Int</li><li class="src short"><a href="#v:mkMsgData">mkMsgData</a> :: Serialize a =&gt; a -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgData">MsgData</a></li><li class="src short"><a href="#v:unMsgData">unMsgData</a> :: <a href="Join-Interpretation-Simple-Types.html#t:MsgData">MsgData</a> -&gt; ByteString</li><li class="src short"><a href="#v:unsafeDecodeMsgData">unsafeDecodeMsgData</a> :: Serialize a =&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgData">MsgData</a> -&gt; a</li><li class="src short"><a href="#v:mkMsg">mkMsg</a> :: <a href="Join-Interpretation-Simple-Types.html#t:MsgData">MsgData</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:ReplyId">ReplyId</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:Msg">Msg</a></li><li class="src short"><a href="#v:unMsg">unMsg</a> :: <a href="Join-Interpretation-Simple-Types.html#t:Msg">Msg</a> -&gt; (<a href="Join-Interpretation-Simple-Types.html#t:MsgData">MsgData</a>, <a href="Join-Interpretation-Simple-Types.html#t:ReplyId">ReplyId</a>)</li><li class="src short"><a href="#v:mkMsgQueue">mkMsgQueue</a> :: <a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a></li><li class="src short"><span class="keyword">data</span>  <a href="#t:ChanMatch">ChanMatch</a> </li><li class="src short"><span class="keyword">type</span> <a href="#t:ChanMatches">ChanMatches</a> = [<a href="Join-Interpretation-Simple-Types.html#t:ChanMatch">ChanMatch</a>]</li><li class="src short"><span class="keyword">data</span>  <a href="#t:MatchRule">MatchRule</a>  = <span class="keyword">forall</span> f . <a href="Join-Language.html#t:Apply">Apply</a> f =&gt; <a href="#v:MatchRule">MatchRule</a> <a href="Join-Interpretation-Simple-Types.html#t:ChanMatches">ChanMatches</a> f</li><li class="src short"><span class="keyword">type</span> <a href="#t:MatchRules">MatchRules</a> = [<a href="Join-Interpretation-Simple-Types.html#t:MatchRule">MatchRule</a>]</li><li class="src short"><a href="#v:mkChanMatch">mkChanMatch</a> :: <a href="Join-Language.html#t:SubPattern">SubPattern</a> t p =&gt; t -&gt; <a href="Join-Interpretation-Simple-Types.html#t:ChanMatch">ChanMatch</a></li><li class="src short"><a href="#v:mkChanMatches">mkChanMatches</a> :: <a href="Join-Language.html#t:Pattern">Pattern</a> t p =&gt; t -&gt; <a href="Join-Interpretation-Simple-Types.html#t:ChanMatches">ChanMatches</a></li><li class="src short"><a href="#v:mkMatchRule">mkMatchRule</a> :: (<a href="Join-Language.html#t:Apply">Apply</a> f, <a href="Join-Language.html#t:Pattern">Pattern</a> t f) =&gt; t -&gt; f -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MatchRule">MatchRule</a></li><li class="src short"><a href="#v:registerChanId">registerChanId</a> :: <a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a></li><li class="src short"><a href="#v:registerMsg">registerMsg</a> :: <a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:Msg">Msg</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a></li><li class="src short"><a href="#v:registerMatchRule">registerMatchRule</a> :: <a href="Join-Language.html#t:Apply">Apply</a> f =&gt; <a href="Join-Interpretation-Simple-Types.html#t:ChanMatches">ChanMatches</a> -&gt; f -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MatchRules">MatchRules</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MatchRules">MatchRules</a></li><li class="src short"><a href="#v:tryMsgMatch">tryMsgMatch</a> :: Maybe <a href="Join-Interpretation-Simple-Types.html#t:MsgData">MsgData</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:Msgs">Msgs</a> -&gt; Maybe (<a href="Join-Interpretation-Simple-Types.html#t:Msgs">Msgs</a>, <a href="Join-Interpretation-Simple-Types.html#t:Msg">Msg</a>)</li><li class="src short"><a href="#v:tryChanMatch">tryChanMatch</a> :: <a href="Join-Interpretation-Simple-Types.html#t:ChanMatch">ChanMatch</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a> -&gt; Maybe (<a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a>, <a href="Join-Interpretation-Simple-Types.html#t:Msg">Msg</a>)</li><li class="src short"><a href="#v:tryChanMatches">tryChanMatches</a> :: <a href="Join-Interpretation-Simple-Types.html#t:ChanMatches">ChanMatches</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a> -&gt; Maybe (<a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a>, <a href="Join-Interpretation-Simple-Types.html#t:Msgs">Msgs</a>)</li><li class="src short"><a href="#v:tryMatchRule">tryMatchRule</a> :: <a href="Join-Interpretation-Simple-Types.html#t:MatchRule">MatchRule</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a> -&gt; Maybe (<a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a>, <a href="Join-Interpretation-Simple-Types.html#t:Msgs">Msgs</a>)</li><li class="src short"><a href="#v:extractReplyIds">extractReplyIds</a> :: <a href="Join-Interpretation-Simple-Types.html#t:ChanMatches">ChanMatches</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:Msgs">Msgs</a> -&gt; [(<a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a>, <a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a>)]</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:ChanId" class="def">ChanId</a>  </p><div class="doc"><p>Unique identifier of a Channel.
</p></div><div class="subs instances"><p id="control.i:ChanId" class="caption collapser" onclick="toggleSection('i:ChanId')">Instances</p><div id="section.i:ChanId" class="show"><table><tr><td class="src">Eq <a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Ord <a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:ReplyId" class="def">ReplyId</a> = Maybe <a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a></p><div class="doc"><p>Potential identifier on which a Reply should be sent.
</p></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:MsgData" class="def">MsgData</a>  </p><div class="doc"><p>Encoding of a value send on a Channel.
</p></div><div class="subs instances"><p id="control.i:MsgData" class="caption collapser" onclick="toggleSection('i:MsgData')">Instances</p><div id="section.i:MsgData" class="show"><table><tr><td class="src">Eq <a href="Join-Interpretation-Simple-Types.html#t:MsgData">MsgData</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Ord <a href="Join-Interpretation-Simple-Types.html#t:MsgData">MsgData</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Msg" class="def">Msg</a>  </p><div class="doc"><p>A single encoded value as sent on a Channel, tagged with a possible
 return ChanId.
</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Msgs" class="def">Msgs</a> = [<a href="Join-Interpretation-Simple-Types.html#t:Msg">Msg</a>]</p><div class="doc"><p>Many Msg's.
</p></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:MsgQueue" class="def">MsgQueue</a>  </p><div class="doc"><p>Map ChannelId's to all the Msg's waiting on them.
</p></div></div><div class="top"><p class="src"><a name="v:newChanId" class="def">newChanId</a> :: IO <a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a></p><div class="doc"><p>Get a new, ChanId, guaranteed to be unique.
</p></div></div><div class="top"><p class="src"><a name="v:mkChanId" class="def">mkChanId</a> ::  <a href="Join-Language-Types-Channel.html#t:Channel">Channel</a> t a -&gt; <a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a></p></div><div class="top"><p class="src"><a name="v:getChanId" class="def">getChanId</a> :: <a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a> -&gt; Int</p><div class="doc"><p>Get an Int representation of a ChanId.
</p></div></div><div class="top"><p class="src"><a name="v:mkMsgData" class="def">mkMsgData</a> :: Serialize a =&gt; a -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgData">MsgData</a></p></div><div class="top"><p class="src"><a name="v:unMsgData" class="def">unMsgData</a> :: <a href="Join-Interpretation-Simple-Types.html#t:MsgData">MsgData</a> -&gt; ByteString</p></div><div class="top"><p class="src"><a name="v:unsafeDecodeMsgData" class="def">unsafeDecodeMsgData</a> :: Serialize a =&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgData">MsgData</a> -&gt; a</p></div><div class="top"><p class="src"><a name="v:mkMsg" class="def">mkMsg</a> :: <a href="Join-Interpretation-Simple-Types.html#t:MsgData">MsgData</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:ReplyId">ReplyId</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:Msg">Msg</a></p></div><div class="top"><p class="src"><a name="v:unMsg" class="def">unMsg</a> :: <a href="Join-Interpretation-Simple-Types.html#t:Msg">Msg</a> -&gt; (<a href="Join-Interpretation-Simple-Types.html#t:MsgData">MsgData</a>, <a href="Join-Interpretation-Simple-Types.html#t:ReplyId">ReplyId</a>)</p></div><div class="top"><p class="src"><a name="v:mkMsgQueue" class="def">mkMsgQueue</a> :: <a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a></p></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:ChanMatch" class="def">ChanMatch</a>  </p><div class="doc"><p>Encodes a single item on the LHS of a Def Pattern.
 Match the first Msg sent to a ChanId/ first Msg equal to MsgData.
</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:ChanMatches" class="def">ChanMatches</a> = [<a href="Join-Interpretation-Simple-Types.html#t:ChanMatch">ChanMatch</a>]</p><div class="doc"><p>Encodes the LHS of a Def Pattern.
 Match when all individual ChanMatch's simultaneously match.
</p></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:MatchRule" class="def">MatchRule</a>  </p><div class="doc"><p>Encodes an entire Def Pattern.
 When the ChanMatches match, a function should be triggered.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><span class="keyword">forall</span> f . <a href="Join-Language.html#t:Apply">Apply</a> f =&gt; <a name="v:MatchRule" class="def">MatchRule</a> <a href="Join-Interpretation-Simple-Types.html#t:ChanMatches">ChanMatches</a> f</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:MatchRules" class="def">MatchRules</a> = [<a href="Join-Interpretation-Simple-Types.html#t:MatchRule">MatchRule</a>]</p></div><div class="top"><p class="src"><a name="v:mkChanMatch" class="def">mkChanMatch</a> :: <a href="Join-Language.html#t:SubPattern">SubPattern</a> t p =&gt; t -&gt; <a href="Join-Interpretation-Simple-Types.html#t:ChanMatch">ChanMatch</a></p><div class="doc"><p>Lift a Language SubPattern into an internal ChanMatch.
</p></div></div><div class="top"><p class="src"><a name="v:mkChanMatches" class="def">mkChanMatches</a> :: <a href="Join-Language.html#t:Pattern">Pattern</a> t p =&gt; t -&gt; <a href="Join-Interpretation-Simple-Types.html#t:ChanMatches">ChanMatches</a></p><div class="doc"><p>Lift a Language Pattern into an internal ChanMatches.
</p></div></div><div class="top"><p class="src"><a name="v:mkMatchRule" class="def">mkMatchRule</a> :: (<a href="Join-Language.html#t:Apply">Apply</a> f, <a href="Join-Language.html#t:Pattern">Pattern</a> t f) =&gt; t -&gt; f -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MatchRule">MatchRule</a></p><div class="doc"><p>Lift the LHS and RHS of a Language Def into an internal MatchRule.
</p></div></div><div class="top"><p class="src"><a name="v:registerChanId" class="def">registerChanId</a> :: <a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a></p><div class="doc"><p>Register a new ChanId (With no waiting Msg's) in a MsgQueue.
</p></div></div><div class="top"><p class="src"><a name="v:registerMsg" class="def">registerMsg</a> :: <a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:Msg">Msg</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a></p><div class="doc"><p>Register, on a ChanId, a new Msg in a MsgQueue.
</p></div></div><div class="top"><p class="src"><a name="v:registerMatchRule" class="def">registerMatchRule</a> :: <a href="Join-Language.html#t:Apply">Apply</a> f =&gt; <a href="Join-Interpretation-Simple-Types.html#t:ChanMatches">ChanMatches</a> -&gt; f -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MatchRules">MatchRules</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MatchRules">MatchRules</a></p><div class="doc"><p>Given ChanMatches and a corresponding trigger function, register it in
 a MatchRules collection.
</p></div></div><div class="top"><p class="src"><a name="v:tryMsgMatch" class="def">tryMsgMatch</a> :: Maybe <a href="Join-Interpretation-Simple-Types.html#t:MsgData">MsgData</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:Msgs">Msgs</a> -&gt; Maybe (<a href="Join-Interpretation-Simple-Types.html#t:Msgs">Msgs</a>, <a href="Join-Interpretation-Simple-Types.html#t:Msg">Msg</a>)</p><div class="doc"><p>With a possible MsgData to require equality with, extract the first
 matching Msg from some Msgs.
</p></div></div><div class="top"><p class="src"><a name="v:tryChanMatch" class="def">tryChanMatch</a> :: <a href="Join-Interpretation-Simple-Types.html#t:ChanMatch">ChanMatch</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a> -&gt; Maybe (<a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a>, <a href="Join-Interpretation-Simple-Types.html#t:Msg">Msg</a>)</p><div class="doc"><p>Given a ChanMatch, attempt to extract a matching Msg within a MsgQueue.
</p></div></div><div class="top"><p class="src"><a name="v:tryChanMatches" class="def">tryChanMatches</a> :: <a href="Join-Interpretation-Simple-Types.html#t:ChanMatches">ChanMatches</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a> -&gt; Maybe (<a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a>, <a href="Join-Interpretation-Simple-Types.html#t:Msgs">Msgs</a>)</p><div class="doc"><p>Given a collection of ChanMatch's, extract a set of matching Msgs when
 each ChanMatch is successful.
</p></div></div><div class="top"><p class="src"><a name="v:tryMatchRule" class="def">tryMatchRule</a> :: <a href="Join-Interpretation-Simple-Types.html#t:MatchRule">MatchRule</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a> -&gt; Maybe (<a href="Join-Interpretation-Simple-Types.html#t:MsgQueue">MsgQueue</a>, <a href="Join-Interpretation-Simple-Types.html#t:Msgs">Msgs</a>)</p><div class="doc"><p>Given a MatchRule and MessageQueues, test the rule, if successful
 returning the updated MessageQueues and the matching Messages.
</p></div></div><div class="top"><p class="src"><a name="v:extractReplyIds" class="def">extractReplyIds</a> :: <a href="Join-Interpretation-Simple-Types.html#t:ChanMatches">ChanMatches</a> -&gt; <a href="Join-Interpretation-Simple-Types.html#t:Msgs">Msgs</a> -&gt; [(<a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a>, <a href="Join-Interpretation-Simple-Types.html#t:ChanId">ChanId</a>)]</p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>